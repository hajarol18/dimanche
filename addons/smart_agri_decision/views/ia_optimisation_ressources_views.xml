<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- ======================================== -->
    <!-- OPTIMISATION DES RESSOURCES IA -->
    <!-- Eau, engrais, main-d'≈ìuvre intelligente -->
    <!-- ======================================== -->

    <!-- VUE OPTIMISATION RESSOURCES IA -->
    <record id="view_ia_optimisation_ressources_form" model="ir.ui.view">
        <field name="name">smart_agri_ia_optimisation_ressources.form</field>
        <field name="model">smart_agri_ia_optimisation_ressources</field>
        <field name="arch" type="xml">
            <form string="Optimisation IA - Ressources Agricoles">
                <header>
                    <button name="action_optimiser_ressources" type="object" string="‚ö° Optimiser Ressources" class="btn-primary"/>
                    <button name="action_calculer_economies" type="object" string="üí∞ Calculer √âconomies" class="btn-success"/>
                    <button name="action_planifier_actions" type="object" string="üìÖ Planifier Actions" class="btn-info"/>
                    <button name="action_generer_rapport" type="object" string="üìä Rapport Optimisation" class="btn-secondary"/>
                    <field name="state" widget="statusbar" statusbar_visible="analyse,optimisation,planification,execution,termine"/>
                </header>

                <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="name" placeholder="Nom de l'Optimisation des Ressources"/>
                        </h1>
                        <h3>
                            <field name="description" placeholder="Description de l'optimisation"/>
                        </h3>
                    </div>

                    <!-- INFORMATIONS G√âN√âRALES -->
                    <div class="row mt-3">
                                                                <div class="col-md-6">
                                            <div class="o_form_label">üå± Exploitation</div>
                                            <field name="exploitation_id"/>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="o_form_label">üåç Parcelle</div>
                                            <field name="parcelle_id"/>
                                        </div>
                    </div>

                    <!-- OPTIMISATION IRRIGATION IA -->
                    <div class="row mt-3">
                        <div class="col-md-12">
                            <div class="card border-primary">
                                <div class="card-header bg-primary text-white">
                                    <h5>üíß Optimisation Irrigation IA - Gestion Intelligente de l'Eau</h5>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-3">
                                            <div class="o_form_label">üíß Besoin en Eau Actuel (mm)</div>
                                            <field name="besoin_eau_actuel" widget="float"/>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="o_form_label">üíß Besoin en Eau Optimis√© (mm)</div>
                                            <field name="besoin_eau_optimise" widget="float"/>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="o_form_label">üíß √âconomie d'Eau (%)</div>
                                            <field name="economie_eau" widget="float"/>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="o_form_label">üíß Syst√®me d'Irrigation</div>
                                            <field name="systeme_irrigation"/>
                                        </div>
                                    </div>
                                    <div class="row mt-2">
                                        <div class="col-md-3">
                                            <div class="o_form_label">üíß Fr√©quence Optimale (jours)</div>
                                            <field name="frequence_irrigation_optimale" widget="integer"/>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="o_form_label">üíß Dose Optimale (mm)</div>
                                            <field name="dose_irrigation_optimale" widget="float"/>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="o_form_label">üíß Horaires Optimaux</div>
                                            <field name="horaires_irrigation_optimaux"/>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="o_form_label">üíß Dur√©e Optimale (min)</div>
                                            <field name="duree_irrigation_optimale" widget="integer"/>
                                        </div>
                                    </div>
                                    <div class="row mt-2">
                                        <div class="col-md-6">
                                            <div class="o_form_label">üíß Capteurs Recommand√©s</div>
                                            <field name="capteurs_recommandes" widget="text"/>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="o_form_label">üíß Actions d'Optimisation</div>
                                            <field name="actions_optimisation_irrigation" widget="text"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- OPTIMISATION ENGRAIS IA -->
                    <div class="row mt-3">
                        <div class="col-md-12">
                            <div class="card border-success">
                                <div class="card-header bg-success text-white">
                                    <h5>üåø Optimisation Engrais IA - Fertilisation Intelligente</h5>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-3">
                                            <div class="o_form_label">üåø Azote Actuel (kg/ha)</div>
                                            <field name="azote_actuel" widget="float"/>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="o_form_label">üåø Azote Optimis√© (kg/ha)</div>
                                            <field name="azote_optimise" widget="float"/>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="o_form_label">üåø √âconomie Azote (%)</div>
                                            <field name="economie_azote" widget="float"/>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="o_form_label">üåø Type d'Engrais Azot√©</div>
                                            <field name="type_engrais_azote"/>
                                        </div>
                                    </div>
                                    <div class="row mt-2">
                                        <div class="col-md-3">
                                            <div class="o_form_label">üåø Phosphore Actuel (kg/ha)</div>
                                            <field name="phosphore_actuel" widget="float"/>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="o_form_label">üåø Phosphore Optimis√© (kg/ha)</div>
                                            <field name="phosphore_optimise" widget="float"/>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="o_form_label">üåø √âconomie Phosphore (%)</div>
                                            <field name="economie_phosphore" widget="float"/>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="o_form_label">üåø Type d'Engrais Phosphor√©</div>
                                            <field name="type_engrais_phosphore"/>
                                        </div>
                                    </div>
                                    <div class="row mt-2">
                                        <div class="col-md-3">
                                            <div class="o_form_label">üåø Potassium Actuel (kg/ha)</div>
                                            <field name="potassium_actuel" widget="float"/>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="o_form_label">üåø Potassium Optimis√© (kg/ha)</div>
                                            <field name="potassium_optimise" widget="float"/>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="o_form_label">üåø √âconomie Potassium (%)</div>
                                            <field name="economie_potassium" widget="float"/>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="o_form_label">üåø Type d'Engrais Potassique</div>
                                            <field name="type_engrais_potassique"/>
                                        </div>
                                    </div>
                                    <div class="row mt-2">
                                        <div class="col-md-6">
                                            <div class="o_form_label">üåø Plan de Fertilisation</div>
                                            <field name="plan_fertilisation" widget="text"/>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="o_form_label">üåø Actions d'Optimisation</div>
                                            <field name="actions_optimisation_engrais" widget="text"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- OPTIMISATION MAIN-D'≈íUVRE IA -->
                    <div class="row mt-3">
                        <div class="col-md-12">
                            <div class="card border-warning">
                                <div class="card-header bg-warning text-white">
                                    <h5>üë∑ Optimisation Main-d'≈íuvre IA - Planification Intelligente</h5>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-3">
                                            <div class="o_form_label">üë∑ Heures Actuelles (h/ha)</div>
                                            <field name="heures_main_oeuvre_actuelles" widget="float"/>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="o_form_label">üë∑ Heures Optimis√©es (h/ha)</div>
                                            <field name="heures_main_oeuvre_optimisees" widget="float"/>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="o_form_label">üë∑ √âconomie Heures (%)</div>
                                            <field name="economie_heures" widget="float"/>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="o_form_label">üë∑ Co√ªt Main-d'≈íuvre (MAD/ha)</div>
                                            <field name="cout_main_oeuvre" widget="float"/>
                                        </div>
                                    </div>
                                    <div class="row mt-2">
                                        <div class="col-md-3">
                                            <div class="o_form_label">üë∑ T√¢ches Prioritaires</div>
                                            <field name="taches_prioritaires"/>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="o_form_label">üë∑ S√©quence Optimale</div>
                                            <field name="sequence_optimale"/>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="o_form_label">üë∑ √âquipements Recommand√©s</div>
                                            <field name="equipements_recommandes"/>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="o_form_label">üë∑ Formation Requise</div>
                                            <field name="formation_requise"/>
                                        </div>
                                    </div>
                                    <div class="row mt-2">
                                        <div class="col-md-6">
                                            <div class="o_form_label">üë∑ Plan de Travail Optimis√©</div>
                                            <field name="plan_travail_optimise" widget="text"/>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="o_form_label">üë∑ Actions d'Optimisation</div>
                                            <field name="actions_optimisation_main_oeuvre" widget="text"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ANALYSE √âCONOMIQUE IA -->
                    <div class="row mt-3">
                        <div class="col-md-12">
                            <div class="card border-info">
                                <div class="card-header bg-info text-white">
                                    <h5>üí∞ Analyse √âconomique IA - ROI et √âconomies</h5>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-3">
                                            <div class="text-center">
                                                <h4 class="text-success">
                                                    <field name="economies_totales" widget="float"/> MAD/ha
                                                </h4>
                                                <small>√âconomies Totales</small>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="text-center">
                                                <h4 class="text-info">
                                                    <field name="roi_optimisation" widget="float"/>%
                                                </h4>
                                                <small>ROI Optimisation</small>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="text-center">
                                                <h4 class="text-warning">
                                                    <field name="cout_implementation" widget="float"/> MAD/ha
                                                </h4>
                                                <small>Co√ªt Impl√©mentation</small>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="text-center">
                                                <h4 class="text-primary">
                                                    <field name="delai_retour_investissement" widget="float"/> mois
                                                </h4>
                                                <small>D√©lai Retour</small>
                                            </div>
                                        </div>
                                    </div>
                                                                         <div class="row mt-3">
                                         <div class="col-md-6">
                                             <h6>üìä R√©partition des √âconomies</h6>
                                             <div class="alert alert-info">
                                                 <strong>‚ÑπÔ∏è Information :</strong> La r√©partition d√©taill√©e des √©conomies sera disponible dans une prochaine version.
                                             </div>
                                         </div>
                                         <div class="col-md-6">
                                             <h6>üìà Projections √âconomiques</h6>
                                             <div class="alert alert-info">
                                                 <strong>‚ÑπÔ∏è Information :</strong> Les projections √©conomiques seront disponibles dans une prochaine version.
                                             </div>
                                         </div>
                                     </div>
                                </div>
                            </div>
                        </div>
                    </div>

                                         <!-- PLAN D'ACTION OPTIMISATION -->
                     <div class="row mt-3">
                         <div class="col-md-12">
                             <div class="card border-success">
                                 <div class="card-header bg-success text-white">
                                     <h5>üìã Plan d'Action IA - Impl√©mentation de l'Optimisation</h5>
                                 </div>
                                 <div class="card-body">
                                     <div class="alert alert-info">
                                         <strong>‚ÑπÔ∏è Information :</strong> Le plan d'action d√©taill√© sera disponible dans une prochaine version.
                                         <br/>Pour l'instant, utilisez les boutons d'action dans l'en-t√™te pour optimiser vos ressources.
                                     </div>
                                 </div>
                             </div>
                         </div>
                     </div>

                    <!-- SUIVI ET PERFORMANCE -->
                    <div class="row mt-3">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5>üìä Suivi et Performance - M√©triques IA</h5>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-3">
                                            <div class="o_form_label">üìä Score d'Optimisation</div>
                                            <field name="score_optimisation" widget="integer"/>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="o_form_label">üìä Confiance IA</div>
                                            <field name="confiance_optimisation" widget="integer"/>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="o_form_label">üìä Pr√©cision Pr√©dictions</div>
                                            <field name="precision_predictions" widget="integer"/>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="o_form_label">üìä Date Derni√®re Optimisation</div>
                                            <field name="date_derniere_optimisation" widget="datetime"/>
                                        </div>
                                    </div>
                                    <div class="row mt-2">
                                        <div class="col-md-6">
                                            <div class="o_form_label">üìä Indicateurs de Performance</div>
                                            <field name="indicateurs_performance" widget="text"/>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="o_form_label">üìä Recommandations d'Am√©lioration</div>
                                            <field name="recommandations_amelioration" widget="text"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- GRAPHIQUES D'OPTIMISATION -->
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h6>üìà √âvolution des √âconomies</h6>
                                </div>
                                <div class="card-body">
                                    <field name="graphique_evolution_economies" widget="chart"/>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h6>üåç R√©partition des Ressources</h6>
                                </div>
                                <div class="card-body">
                                    <field name="graphique_repartition_ressources" widget="chart"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </sheet>

                                 <!-- Note: Le mod√®le n'h√©rite pas de mail.thread, donc pas de chatter -->
            </form>
        </field>
    </record>

    <!-- VUE LISTE OPTIMISATION RESSOURCES IA -->
    <record id="view_ia_optimisation_ressources_list" model="ir.ui.view">
        <field name="name">smart_agri_ia_optimisation_ressources.list</field>
        <field name="model">smart_agri_ia_optimisation_ressources</field>
        <field name="arch" type="xml">
            <list string="Optimisations IA Ressources">
                <field name="name"/>
                <field name="exploitation_id"/>
                <field name="economies_totales"/>
                <field name="roi_optimisation"/>
                <field name="score_optimisation" widget="badge" 
                       decoration-success="score_optimisation &gt;= 80" 
                       decoration-warning="score_optimisation &gt;= 60" 
                       decoration-danger="score_optimisation &lt; 60"/>
                <field name="confiance_optimisation"/>
                <field name="date_derniere_optimisation"/>
                <field name="state"/>
            </list>
        </field>
    </record>

    <!-- ACTION OPTIMISATION RESSOURCES IA -->
    <record id="action_ia_optimisation_ressources" model="ir.actions.act_window">
        <field name="name">Optimisation Ressources IA</field>
        <field name="res_model">smart_agri_ia_optimisation_ressources</field>
        <field name="view_mode">list,form</field>
        <field name="view_id" ref="view_ia_optimisation_ressources_list"/>
        <field name="context">{'search_default_optimisations_actives': 1}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Cr√©ez votre premi√®re optimisation IA des ressources !
            </p>
            <p>
                L'optimisation IA des ressources vous permet de :
                <ul>
                    <li>üíß Optimiser l'irrigation et √©conomiser l'eau</li>
                    <li>üåø Optimiser les engrais et r√©duire les co√ªts</li>
                    <li>üë∑ Optimiser la main-d'≈ìuvre et am√©liorer l'efficacit√©</li>
                    <li>üí∞ Calculer les √©conomies et le ROI</li>
                    <li>üìä Suivre les performances d'optimisation</li>
                </ul>
            </p>
        </field>
    </record>

    </odoo>
