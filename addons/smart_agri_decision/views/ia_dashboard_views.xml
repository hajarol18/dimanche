<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- ======================================== -->
    <!-- TABLEAU DE BORD IA INTELLIGENT -->
    <!-- M√©triques en temps r√©el + Alertes auto -->
    <!-- ======================================== -->

    <!-- VUE TABLEAU DE BORD IA -->
    <record id="view_ia_dashboard_form" model="ir.ui.view">
        <field name="name">smart_agri_ia_dashboard.form</field>
        <field name="model">smart_agri_ia_dashboard</field>
        <field name="arch" type="xml">
            <form string="Tableau de Bord IA - SmartAgriDecision">
                <header>
                    <button name="action_actualiser_dashboard" type="object" string="üîÑ Actualiser" class="btn-primary"/>
                    <button name="action_generer_rapport_ia" type="object" string="üìä Rapport IA" class="btn-secondary"/>
                    <button name="action_alerte_automatique" type="object" string="üö® Alertes Auto" class="btn-warning"/>
                    <field name="state" widget="statusbar" statusbar_visible="brouillon,actif,termine"/>
                </header>

                <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="name" placeholder="Nom du Tableau de Bord"/>
                        </h1>
                    </div>

                    <!-- M√âTRIQUES IA EN TEMPS R√âEL -->
                    <div class="row mt-3">
                        <div class="col-md-3">
                            <div class="card border-success">
                                <div class="card-header bg-success text-white">
                                    <h5 class="mb-0">üéØ Score IA Global</h5>
                                </div>
                                <div class="card-body text-center">
                                    <h2 class="text-success">
                                        <field name="score_ia_global" widget="integer"/>%
                                    </h2>
                                    <small>Performance IA</small>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="card border-info">
                                <div class="card-header bg-info text-white">
                                    <h5 class="mb-0">üå± Pr√©dictions Actives</h5>
                                </div>
                                <div class="card-body text-center">
                                    <h2 class="text-info">
                                        <field name="nombre_predictions_actives" widget="integer"/>
                                    </h2>
                                    <small>En cours</small>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="card border-warning">
                                <div class="card-header bg-warning text-white">
                                    <h5 class="mb-0">‚ö†Ô∏è Alertes Climatiques</h5>
                                </div>
                                <div class="card-body text-center">
                                    <h2 class="text-warning">
                                        <field name="nombre_alertes_climatiques" widget="integer"/>
                                    </h2>
                                    <small>√Ä traiter</small>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="card border-danger">
                                <div class="card-header bg-danger text-white">
                                    <h5 class="mb-0">üö® Risques √âlev√©s</h5>
                                </div>
                                <div class="card-body text-center">
                                    <h2 class="text-danger">
                                        <field name="nombre_risques_eleves" widget="integer"/>
                                    </h2>
                                    <small>Urgent</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- GRAPHIQUES IA INTERACTIFS -->
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5>üìà √âvolution des Scores IA</h5>
                                </div>
                                <div class="card-body">
                                    <field name="graphique_evolution_scores" widget="chart"/>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5>üåç R√©partition des Risques par Zone</h5>
                                </div>
                                <div class="card-body">
                                    <field name="graphique_repartition_risques" widget="chart"/>
                                </div>
                            </div>
                        </div>
                    </div>

                                         <!-- ALERTES INTELLIGENTES AUTOMATIQUES -->
                     <div class="row mt-3">
                         <div class="col-md-12">
                             <div class="card border-warning">
                                 <div class="card-header bg-warning text-white">
                                     <h5>üö® Alertes IA Automatiques - D√©tection Intelligente</h5>
                                 </div>
                                 <div class="card-body">
                                     <div class="alert alert-info">
                                         <strong>‚ÑπÔ∏è Information :</strong> Les alertes IA d√©taill√©es seront disponibles dans une prochaine version.
                                         <br/>Pour l'instant, utilisez le bouton "Alertes Auto" dans l'en-t√™te pour g√©n√©rer des alertes.
                                     </div>
                                 </div>
                             </div>
                         </div>
                     </div>

                                         <!-- OPTIMISATIONS IA RECOMMAND√âES -->
                     <div class="row mt-3">
                         <div class="col-md-6">
                             <div class="card border-success">
                                 <div class="card-header bg-success text-white">
                                     <h5>üí° Optimisations IA Recommand√©es</h5>
                                 </div>
                                 <div class="card-body">
                                     <div class="alert alert-info">
                                         <strong>‚ÑπÔ∏è Information :</strong> Les optimisations IA d√©taill√©es seront disponibles dans une prochaine version.
                                         <br/>Pour l'instant, utilisez les boutons d'action dans l'en-t√™te.
                                     </div>
                                 </div>
                             </div>
                         </div>
                         
                         <div class="col-md-6">
                             <div class="card border-info">
                                 <div class="card-header bg-info text-white">
                                     <h5>üéØ Pr√©dictions IA R√©centes</h5>
                                 </div>
                                 <div class="card-body">
                                     <div class="alert alert-info">
                                         <strong>‚ÑπÔ∏è Information :</strong> Les pr√©dictions IA d√©taill√©es seront disponibles dans une prochaine version.
                                         <br/>Pour l'instant, utilisez les boutons d'action dans l'en-t√™te.
                                     </div>
                                 </div>
                             </div>
                         </div>
                     </div>

                    <!-- CARTE INTERACTIVE DES PARCELLES IA -->
                    <div class="row mt-3">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5>üó∫Ô∏è Cartographie IA des Parcelles - Analyse Spatiale Intelligente</h5>
                                </div>
                                <div class="card-body">
                                    <field name="carte_parcelles_ia" widget="map"/>
                                    <div class="mt-2">
                                        <small class="text-muted">
                                            üéØ <strong>L√©gende IA :</strong> 
                                            üü¢ Zone optimale | üü° Zone √† surveiller | üî¥ Zone √† risque | 
                                            üíß Irrigation optimis√©e | üå± Culture recommand√©e
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- SIMULATION DE SC√âNARIOS IA -->
                    <div class="row mt-3">
                        <div class="col-md-12">
                            <div class="card border-primary">
                                <div class="card-header bg-primary text-white">
                                    <h5>üß™ Simulateur de Sc√©narios IA - Changement Climatique</h5>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="o_form_label">üå°Ô∏è Augmentation Temp√©rature (¬∞C)</div>
                                            <field name="simulation_temperature" widget="float"/>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="o_form_label">üåßÔ∏è Variation Pr√©cipitations (%)</div>
                                            <field name="simulation_precipitations" widget="float"/>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="o_form_label">üåç Sc√©nario RCP</div>
                                            <field name="simulation_scenario_rcp"/>
                                        </div>
                                    </div>
                                    <div class="row mt-2">
                                        <div class="col-md-12">
                                            <button name="action_simuler_scenario_ia" type="object" string="üöÄ Lancer Simulation IA" class="btn btn-primary btn-lg btn-block"/>
                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-md-12">
                                            <field name="resultats_simulation_ia" widget="html"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                                         <!-- ANALYTICS IA AVANC√âS -->
                     <div class="row mt-3">
                         <div class="col-md-12">
                             <div class="card">
                                 <div class="card-header">
                                     <h5>üìä Analytics IA Avanc√©s - Machine Learning Insights</h5>
                                 </div>
                                 <div class="card-body">
                                     <div class="alert alert-info">
                                         <strong>‚ÑπÔ∏è Information :</strong> Les analytics IA avanc√©s seront disponibles dans une prochaine version.
                                         <br/>Pour l'instant, utilisez les boutons d'action dans l'en-t√™te pour g√©n√©rer des rapports.
                                     </div>
                                 </div>
                             </div>
                         </div>
                     </div>
                </sheet>

                                 <!-- Note: Le mod√®le n'h√©rite pas de mail.thread, donc pas de chatter -->
            </form>
        </field>
    </record>

    <!-- VUE LISTE TABLEAU DE BORD IA -->
    <record id="view_ia_dashboard_list" model="ir.ui.view">
        <field name="name">smart_agri_ia_dashboard.list</field>
        <field name="model">smart_agri_ia_dashboard</field>
        <field name="arch" type="xml">
            <list string="Tableaux de Bord IA">
                <field name="name"/>
                <field name="score_ia_global" widget="badge" decoration-success="score_ia_global &gt;= 80" decoration-warning="score_ia_global &gt;= 60" decoration-danger="score_ia_global &lt; 60"/>
                <field name="nombre_predictions_actives"/>
                <field name="nombre_alertes_climatiques"/>
                <field name="nombre_risques_eleves"/>
                <field name="date_derniere_actualisation"/>
                <field name="state"/>
            </list>
        </field>
    </record>

    <!-- ACTION TABLEAU DE BORD IA -->
    <record id="action_ia_dashboard" model="ir.actions.act_window">
        <field name="name">Tableau de Bord IA</field>
        <field name="res_model">smart_agri_ia_dashboard</field>
        <field name="view_mode">list,form</field>
        <field name="view_id" ref="view_ia_dashboard_list"/>
        <field name="context">{'search_default_dashboard_actifs': 1}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Cr√©ez votre premier tableau de bord IA intelligent !
            </p>
            <p>
                Le tableau de bord IA vous donne une vue d&apos;ensemble en temps r√©el de :
                <ul>
                    <li>üéØ Scores IA et performances</li>
                    <li>üö® Alertes climatiques automatiques</li>
                    <li>üí° Optimisations recommand√©es</li>
                    <li>üó∫Ô∏è Cartographie spatiale intelligente</li>
                    <li>üß™ Simulation de sc√©narios climatiques</li>
                </ul>
            </p>
        </field>
    </record>

</odoo>
