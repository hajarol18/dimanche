<?xml version="1.0" encoding="utf-8"?>
<odoo>
    
        <!-- Vue liste pour les scénarios climatiques -->
        <record id="view_smart_agri_scenario_climatique_list" model="ir.ui.view">
            <field name="name">smart.agri.scenario.climatique.list</field>
            <field name="model">smart_agri_scenario_climatique</field>
            <field name="arch" type="xml">
                <list string="Scénarios Climatiques">
                    <field name="name"/>
                    <field name="code_scenario"/>
                    <field name="type_scenario"/>
                    <field name="periode_debut"/>
                    <field name="periode_fin"/>
                    <field name="impact_rendement"/>
                    <field name="state"/>
                </list>
            </field>
        </record>

        <!-- Vue formulaire sophistiquée avec 4 cases interactives -->
        <record id="view_smart_agri_scenario_climatique_form" model="ir.ui.view">
            <field name="name">smart.agri.scenario.climatique.form</field>
            <field name="model">smart_agri_scenario_climatique</field>
            <field name="arch" type="xml">
                <form string="Scénario Climatique">
                    <header>
                        <button name="action_simuler_scenario" type="object" string="Simuler le Scénario" 
                                class="oe_highlight" icon="fa-play" 
                                invisible="state == 'simule'"/>
                        <field name="state" widget="statusbar" statusbar_visible="brouillon,simule,valide"/>
                    </header>
                    
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="name" placeholder="Nom du scénario"/>
                            </h1>
                        </div>
                        
                        <!-- INFORMATIONS DE BASE -->
                        <group>
                            <group string="Identification">
                                <field name="code_scenario"/>
                                <field name="type_scenario"/>
                                <field name="exploitation_id"/>
                                <field name="description"/>
                            </group>
                            <group string="Période">
                                <field name="periode_debut"/>
                                <field name="periode_fin"/>
                            </group>
                        </group>
                        
                        <!-- PARAMÈTRES CLIMATIQUES -->
                        <group>
                            <group string="Paramètres Climatiques">
                                <field name="augmentation_temperature"/>
                                <field name="variation_precipitation"/>
                                <field name="frequence_secheresse"/>
                                <field name="intensite_events"/>
                            </group>
                        </group>
                        
                        <!-- LES 4 CASES INTERACTIVES MAGIQUES ! -->
                        <div class="oe_chatter">
                            <h3 class="text-center mb-3">
                                <i class="fa fa-magic"></i> SIMULATION CLIMATIQUE INTERACTIVE
                            </h3>
                            
                            <!-- CASE 1: IMPACT RENDEMENT -->
                            <div class="card mb-3" style="border-left: 4px solid #28a745;">
                                <div class="card-header bg-light">
                                    <h5 class="mb-0">
                                        <i class="fa fa-chart-line text-success"></i> 
                                        Impact sur le Rendement Agricole
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <strong>Impact Prédit:</strong>
                                            <field name="impact_rendement" widget="badge" 
                                                   decoration-success="impact_rendement in ['positif', 'fortement_positif']"
                                                   decoration-warning="impact_rendement == 'neutre'"
                                                   decoration-danger="impact_rendement in ['negatif', 'fortement_negatif']"/>
                                        </div>
                                        <div class="col-md-6">
                                            <button name="action_simuler_scenario" type="object" 
                                                    string="Simuler Rendement" class="btn btn-success btn-sm">
                                                <i class="fa fa-play"></i> Simuler
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- CASE 2: IMPACT IRRIGATION -->
                            <div class="card mb-3" style="border-left: 4px solid #17a2b8;">
                                <div class="card-header bg-light">
                                    <h5 class="mb-0">
                                        <i class="fa fa-tint text-info"></i> 
                                        Impact sur les Besoins en Irrigation
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <strong>Impact Prédit:</strong>
                                            <field name="impact_irrigation" widget="badge" 
                                                   decoration-success="impact_irrigation in ['positif', 'fortement_positif']"
                                                   decoration-warning="impact_irrigation == 'neutre'"
                                                   decoration-danger="impact_irrigation in ['negatif', 'fortement_negatif']"/>
                                        </div>
                                        <div class="col-md-6">
                                            <button name="action_simuler_scenario" type="object" 
                                                    string="Simuler Irrigation" class="btn btn-info btn-sm">
                                                <i class="fa fa-play"></i> Simuler
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- CASE 3: IMPACT RISQUES -->
                            <div class="card mb-3" style="border-left: 4px solid #dc3545;">
                                <div class="card-header bg-light">
                                    <h5 class="mb-0">
                                        <i class="fa fa-exclamation-triangle text-danger"></i> 
                                        Impact sur les Risques Climatiques
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <strong>Impact Prédit:</strong>
                                            <field name="impact_risques" widget="badge" 
                                                   decoration-success="impact_risques in ['positif', 'fortement_positif']"
                                                   decoration-warning="impact_risques == 'neutre'"
                                                   decoration-danger="impact_risques in ['negatif', 'fortement_negatif']"/>
                                        </div>
                                        <div class="col-md-6">
                                            <button name="action_simuler_scenario" type="object" 
                                                    string="Simuler Risques" class="btn btn-danger btn-sm">
                                                <i class="fa fa-play"></i> Simuler
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- CASE 4: RÉSULTATS COMPLETS -->
                            <div class="card mb-3" style="border-left: 4px solid #6f42c1;">
                                <div class="card-header bg-light">
                                    <h5 class="mb-0">
                                        <i class="fa fa-brain text-purple"></i> 
                                        Résultats de Simulation IA
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <button name="action_simuler_scenario" type="object" 
                                                    string="Lancer Simulation Complète" class="btn btn-primary btn-lg btn-block">
                                                <i class="fa fa-rocket"></i> SIMULATION COMPLÈTE
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- RÉSULTATS DE SIMULATION -->
                        <notebook>
                            <page string="Résultats Simulation" name="resultats">
                                <group>
                                    <field name="resultat_simulation" readonly="1" nolabel="1"/>
                                </group>
                            </page>
                            
                            <page string="Recommandations" name="recommandations">
                                <group>
                                    <field name="recommandations" readonly="1" nolabel="1"/>
                                </group>
                            </page>
                            
                            <page string="Mesures d'Adaptation" name="mesures">
                                <group>
                                    <field name="mesures_adaptation" readonly="1" nolabel="1"/>
                                </group>
                            </page>
                            
                            <page string="Données Météo Simulées" name="meteo">
                                <field name="meteo_ids" readonly="1"/>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- Action pour ouvrir les scénarios climatiques -->
        <record id="action_smart_agri_scenario_climatique" model="ir.actions.act_window">
            <field name="name">Scénarios Climatiques</field>
            <field name="res_model">smart_agri_scenario_climatique</field>
            <field name="view_mode">list,form</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Créez votre premier scénario climatique
                </p>
                <p>
                    Simulez les impacts du changement climatique sur votre exploitation.
                </p>
            </field>
        </record>
    
</odoo>